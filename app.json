{
  "id": "com.schneider.connect",
  "version": "0.0.1",
  "compatibility": ">=2.0.0",
  "sdk": 2,
  "name": {
    "en": "Schneider Connect"
  },
  "description": {
    "en": "Add support for Schneider Connect devices."
  },
  "category": [
    "appliances"
  ],
  "permissions": [],
  "images": {
    "large": "/assets/images/large.png",
    "small": "/assets/images/small.png"
  },
  "author": {
    "name": "Marius Stedjan",
    "email": "marius@stedjan.com"
  },
  "drivers": [
    {
      "id": "mtn507501",
      "name": {
        "en": "Relay 1ch In-Wall"
      },
      "class": "socket",
      "capabilities": [
        "onoff"
      ],
      "zwave": {
        "manufacturerId": 122,
        "productTypeId": 32769,
        "productId": 32770,
        "associationGroups": [
          1
        ],
        "learnmode": {
          "instruction": {
            "en": "Press the button on your device three times"
          }
        }
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ]
    },
    {
      "id": "mtn507502",
      "name": {
        "en": "Relay 2ch In-Wall"
      },
      "class": "socket",
      "capabilities": [
        "onoff"
      ],
      "zwave": {
        "manufacturerId": 122,
        "productTypeId": 32769,
        "productId": 32772,
        "learnmode": {
          "instruction": {
            "en": "Press the button on your device three times"
          }
        },
        "associationGroups": [
          1
        ],
        "multiChannelNodes": {
          "1": {
            "class": "socket",
            "capabilities": [
              "onoff"
            ],
            "name": {
              "en": "Relay Ch1"
            }
          },
          "2": {
            "class": "socket",
            "capabilities": [
              "onoff"
            ],
            "name": {
              "en": "Relay Ch2"
            }
          }
        }
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ]
    },
    {
      "id": "mtn507900",
      "name": {
        "en": "Dimmer In-Wall"
      },
      "class": "light",
      "capabilities": [
        "dim",
        "onoff"
      ],
      "capabilitiesOptions": {
        "onoff": {
          "setOnDim": true
        }
      },
      "zwave": {
        "manufacturerId": 122,
        "productTypeId": 16387,
        "productId": 2,
        "learnmode": {
          "instruction": {
            "en": "Press the button on your device three times"
          }
        },
        "associationGroups": [
          1
        ]
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "settings": [
        {
          "id": "dimming_duration",
          "zwave": {
            "index": 196,
            "size": 1,
            "signed": false
          },
          "type": "number",
          "label": {
            "en": "Dimming Speed"
          },
          "value": 3,
          "attr": {
            "min": 1,
            "max": 255
          },
          "hint": {
            "en": "How fast the dimmer will dim the lights.\nUse 3 for factory default."
          }
        }
      ]
    },
    {
      "id": "mtn508244",
      "name": {
        "en": "Move Switch"
      },
      "class": "button",
      "capabilities": [
        "dim",
        "onoff"
      ],
      "zwave": {
        "manufacturerId": 122,
        "productTypeId": 2,
        "productId": 1,
        "zwaveAllianceProductId": 268,
        "zwaveAllianceProductDocumentation": "https://products.z-wavealliance.org/products/268",
        "learnmode": {
          "instruction": {
            "en": "Press the button on your device three times"
          }
        },
        "associationGroups": [
          1
        ]
      },
      "pair": [
        {
          "id": "list_devices",
          "template": "list_devices",
          "navigation": {
            "next": "add_my_devices"
          }
        },
        {
          "id": "add_my_devices",
          "template": "add_devices"
        }
      ],
      "settings": [
        {
          "id": "54",
          "zwave": {
            "index": 0,
            "size": 1,
            "signed": false
          },
          "type": "number",
          "label": {
            "en": "enknapps rullegardin"
          },
          "value": 4,
          "attr": {
            "min": 0,
            "max": 255
          },
          "hint": {
            "en": "enknapps rullegardin."
          }
        },
        {
          "id": "60",
          "zwave": {
            "index": 60,
            "size": 1,
            "signed": false
          },
          "type": "number",
          "label": {
            "en": "scene rullegardin"
          },
          "value": 0,
          "attr": {
            "min": 0,
            "max": 255
          },
          "hint": {
            "en": "enknapps rullegardin."
          }
        }
      ]
    }
  ],
  "flow": {
    "actions": [
      {
        "id": "schneider_dim_startLevelChange",
        "title": {
          "en": "Start dim level change",
          "nl": "Start helderheid transitie"
        },
        "hint": {
          "en": "This action card will start a dim level change in the set direction. \nDim duration is set in device settings.",
          "nl": "Deze actiekaart start een dimniveauverandering in de ingestelde richting. \nDimduur is ingesteld in apparaatinstellingen."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=mtn507900"
          },
          {
            "name": "direction",
            "type": "dropdown",
            "values": [
              {
                "id": "0",
                "label": {
                  "en": "Increase dim level",
                  "nl": "Toenemende helderheid"
                }
              },
              {
                "id": "1",
                "label": {
                  "en": "Decrease dim level",
                  "nl": "Afnemende helderheid"
                }
              }
            ]
          }
        ]
      },
      {
        "id": "schneider_dim_stopLevelChange",
        "title": {
          "en": "Stop dim level change",
          "nl": "Stop helderheid transitie"
        },
        "hint": {
          "en": "This action card will stop a dim level change.",
          "nl": "Deze actie kaart start een helderheids transitie in de ingestelde richting."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=mtn507900"
          }
        ]
      },
      {
        "id": "schneider_dim_startToggleLevelChange",
        "title": {
          "en": "Start dim level change (toggle direction)",
          "nl": "Start helderheid transitie (wisselrichting)"
        },
        "hint": {
          "en": "This action card will start a dim level change, and toggle dim direction (up/down) for every time it is invoked. \nDim duration is set in device settings.",
          "nl": "Deze actiekaart activeert het begin van een dimniveauverandering en wisselt van richting (omhoog/omlaag). \nDe dimduur wordt ingesteld in apparaatinstellingen."
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=mtn507900"
          },
          {
            "name": "roll_over",
            "type": "dropdown",
            "values": [
              {
                "id": "0",
                "label": {
                  "en": "Stop level change at min/max brightness"
                }
              },
              {
                "id": "1",
                "label": {
                  "en": "Cycle brightness between min/max"
                }
              }
            ],
            "label": {
              "en": "Dimming behavior"
            },
            "hint": {
              "en": "Enable this to toggle dim direction when min/max brightness is reached."
            }
          }
        ]
      },
      {
        "id": "schneider_dim_stopToggleLevelChange",
        "title": {
          "en": "Stop dim level change (toggle direction)",
          "nl": "Stop helderheid transitie (wisselrichting)"
        },
        "hint": {
          "en": "This action card will trigger the stop of a toggled dim level change.",
          "nl": "Deze actiekaart activeert de stop van een omgeschakeld dimniveau wijzigen"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=mtn507900"
          }
        ]
      }
    ],
    "triggers": [
      {
        "id": "mtn508244",
        "title": {
          "en": "Push button",
          "nl": "Druk knop"
        },
        "args": [
          {
            "type": "device",
            "name": "device",
            "filter": "driver_id=mtn508244"
          },
          {
            "name": "scene",
            "type": "dropdown",
            "values": [
              {
                "id": "Key Pressed 1 time",
                "label": {
                  "en": "Pressed 1x",
                  "nl": "1x ingedrukt"
                }
              },
              {
                "id": "Key Pressed 2 times",
                "label": {
                  "en": "Pressed 2x",
                  "nl": "2x ingedrukt"
                }
              },
              {
                "id": "Key Pressed 3 times",
                "label": {
                  "en": "Pressed 3x",
                  "nl": "3x ingedrukt"
                }
              },
              {
                "id": "Key Pressed 4 times",
                "label": {
                  "en": "Pressed 4x",
                  "nl": "4x ingedrukt"
                }
              },
              {
                "id": "Key Pressed 5 times",
                "label": {
                  "en": "Pressed 5x",
                  "nl": "5x ingedrukt"
                }
              },
              {
                "id": "Key Held Down",
                "label": {
                  "en": "Long press (triggers every half second)",
                  "nl": "Lang drukken (activeert elke halve seconde)"
                }
              },
              {
                "id": "Key Released",
                "label": {
                  "en": "Long press released",
                  "nl": "Lang drukken gestopt"
                }
              }
            ]
          }
        ]
      }
    ]
  }
}